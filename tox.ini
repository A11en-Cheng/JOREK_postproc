[tox]
envlist = py37,py38,py39,py310,py311,lint,type,docs

[testenv]
deps = pytest>=6.0
       pytest-cov>=2.10
commands = pytest tests/ -v --cov=jorek_postproc --cov-report=html

[testenv:lint]
deps = flake8>=3.9
       black>=21.0
       isort>=5.0
commands = flake8 jorek_postproc tests
           black --check jorek_postproc tests
           isort --check-only jorek_postproc tests

[testenv:type]
deps = mypy>=0.900
commands = mypy jorek_postproc

[testenv:format]
deps = black>=21.0
       isort>=5.0
commands = black jorek_postproc tests
           isort jorek_postproc tests

[testenv:docs]
deps = sphinx>=3.0
       sphinx-rtd-theme>=1.0
       sphinx-autodoc-typehints>=1.0
commands = sphinx-build -b html docs docs/_build

[testenv:coverage]
deps = pytest>=6.0
       pytest-cov>=2.10
commands = pytest tests/ --cov=jorek_postproc --cov-report=html --cov-report=term-missing

[pytest]
testpaths = tests
python_files = test_*.py
addopts = -v --tb=short

[coverage:run]
branch = True
source = jorek_postproc

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    raise AssertionError
    raise NotImplementedError
    if __name__ == .__main__.:
    if TYPE_CHECKING:
